<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚ªãƒªãƒ‘å…¨è²·ã„æœŸå¾…å€¤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 16px;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 16px;
    }

    input, button {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      background: #007aff;
      color: white;
      border: none;
      border-radius: 6px;
    }

    .card-row {
      display: flex;
      gap: 6px;
      margin-bottom: 8px;
    }

    .card-row input {
      flex: 1;
    }

    .result {
      margin-top: 16px;
      padding: 12px;
      background: #000;
      color: #fff;
      border-radius: 6px;
      font-size: 16px;
    }
  </style>
</head>

<body>

  <h1>ğŸƒ ã‚ªãƒªãƒ‘å…¨è²·ã„æœŸå¾…å€¤</h1>

  <input id="pricePerPack" type="number" placeholder="1å£ã®ä¾¡æ ¼ï¼ˆå††ï¼‰">
  <input id="totalPacks" type="number" placeholder="ç·å£æ•°">

  <h3>æ’å‡ºã‚«ãƒ¼ãƒ‰ï¼ˆå¸‚å ´ä¾¡æ ¼å…¥åŠ›ï¼‰</h3>

  <div id="cards"></div>

  <button onclick="addCard()">ï¼‹ã‚«ãƒ¼ãƒ‰è¿½åŠ </button>

  <h3>ğŸ ãƒ©ã‚¹ãƒˆãƒ¯ãƒ³è³ã®ä¾¡æ ¼ï¼ˆå††ï¼‰</h3>
  <input id="lastOnePrice" type="number" placeholder="ä¾‹ï¼š30000">

  <button onclick="calculateEV()">æœŸå¾…å€¤ã‚’è¨ˆç®—ã™ã‚‹</button>

  <div id="result" class="result"></div>

  <script>
    function addCard() {
      const container = document.getElementById("cards");
      container.insertAdjacentHTML("beforeend", `
        <div class="card-row">
          <input type="text" placeholder="ã‚«ãƒ¼ãƒ‰å">
          <input type="number" placeholder="å¸‚å ´ä¾¡æ ¼ï¼ˆå††ï¼‰">
          <input type="number" placeholder="æšæ•°">
        </div>
      `);
    }

    function calculateEV() {
      const pricePerPack = Number(document.getElementById("pricePerPack").value);
      const totalPacks = Number(document.getElementById("totalPacks").value);
      const lastOnePrice = Number(document.getElementById("lastOnePrice").value);

      let totalCardValue = 0;

      // â€» ã“ã“ã§ã¯ã¾ã ã€Œæšæ•°ã€ã¯è¨ˆç®—ã«ä½¿ã‚ãªã„ï¼ˆæ¬¡ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
      document.querySelectorAll(".card-row").forEach(row => {
        const price = Number(row.children[1].value);
        if (!isNaN(price)) {
          totalCardValue += price;
        }
      });

      const totalCost = pricePerPack * totalPacks;
      const totalReturn = totalCardValue + lastOnePrice;
      const ev = totalReturn - totalCost;

      document.getElementById("result").innerText =
        ç·æŠ•è³‡é¡ï¼š${totalCost.toLocaleString()}å††\n +
        ç·ãƒªã‚¿ãƒ¼ãƒ³ï¼š${totalReturn.toLocaleString()}å††\n +
        `æœŸå¾…å€¤ï¼š${ev.toLocaleString()}å††`;
    }
  </script>

</body>
</html>
